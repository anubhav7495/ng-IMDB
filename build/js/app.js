angular.module("myApp",["ui.bootstrap"]).controller("MovieController",["$scope","imdbService",function(a,b){function c(c){c=a.ID?{i:a.ID,plot:"full"}:a.season&&a.episode?{t:a.search,season:a.season,episode:a.episode,plot:"full"}:{t:a.search,plot:"full"},b.events(c).success(function(b){a.details=b}),a.ID="",a.season&&(c={t:a.search,season:a.season,plot:"full"},b.events(c).success(function(b){a.ep=b}))}var d,e={};void 0===a.search&&(a.async="Game of thrones",a.search="Game of thrones",a.season="1",a.episode="",a.ID="",e={t:a.search,season:a.season,plot:"full"},c(e)),a.getSuggest=function(a){return b.events({s:a}).then(function(a){return a.data.Search.map(function(a){return{list:a,suggest:a.Title+" "+a.Year}})})},a.change=function(){d&&clearTimeout(d),d=setTimeout(c,800)},a.$watch("async",function(){a.async?(a.search=a.async.list.Title,a.season=a.episode=null,setTimeout(c(e),800)):(a.details=null,a.season=a.episode=null)},!0),a.update=function(b){b.Episode?a.ID=b.imdbID:(a.search=b.Title,a.season=""),a.change()},a.select=function(){this.setSelectionRange(0,this.value.length)}}]),angular.module("myApp").factory("imdbService",["$http",function(a){var b=function(b){return a({method:"GET",url:"http://www.omdbapi.com/",params:b})};return{events:function(a){return b(a)}}}]);
